org 32778

;ld hl,sfx_data;	;address of sound effects data

ld hl, 1
main:
	xor a			;6
	ld a, (hl)		;7
	or 0			;8
	jr nz,player 	; 32778
	ret				;10

player:				;11
	ld bc, 1		;12

pushSpeaker:			;13
	push bc			;14
	ld b,0			;15
	ld c, (hl)		;16
	push bc			;17
	ld a, 0x10		;18
	;and 0xf8		;19 ; mask out unwanted bits
	out (0xfe),a	;20
	nop				;21
	nop				;22
	nop				;23
	nop				;24
	nop 			;25
	nop 			;26
	nop				;27
temp1:
	dec bc			;29
	ld a,c			;30
	or b			;31
	jp nz, temp1		; 32805
	ld bc, 8		;33

play:
	dec bc
	ld a, c
	or b
	jp nz, play	;32805
	ld a, 0x7
	and 0xf8
	out (0xfe),a	;push speaker
	pop bc
	nop
	nop
	nop
	nop
	nop
	nop
	nop

readdata:
	dec bc
	ld a, c
	or b
	jp nz, readdata
	pop bc
	dec bc
	ld a, c
	or b
	jp nz, pushSpeaker
	inc hl
	jp main	

sfx_data:
SoundEffectsData:
	defw SoundEffect0Data
	defw SoundEffect1Data	
SoundEffect0Data:
	defw 1,128,3,134,5,140,7,146,9,151,11,155,13,158,15,159,17,160,19,159,21,157,23,154,25,150,27,145,29,140,31,134,33,127,35,121,37,115,39,109,41,105,43,101,45,98,47,96,49,96,51,97,53,99,55,102,57,106,59,111,61,117,63,123,65,130,67,136,69,142,71,147,73,152,75,156,77,158,79,160,81,160,83,159,85,157,87,153,89,149,91,144,93,138,95,101,114,103,108,105,104,107,100,109,98,111,96,113,96,115,97,117,100,119,103,121,108,123,113,125,119,127,125,129,131,131,137,133,143,135,148,137,153,139,156,141,159,143,160,145,160,147,158,149,156,151,152,153,148,155,142,157,137,159,130,161,124,163,118,165,112,167,107,169,103,171,99,173,97,175,96,177,96,179,98,181,100,183,104,185,109,187,114,189,120,191,126,193,133,195,139,197,145,199,150,201,154,203,157,205,159,207,160,209,160,211,158,213,155,215,151,217,147,219,141,221,135,223,129,225,122,227,116,229,111,231,106,233,102,235,99,237,97,239,96,241,97,243,98,245,101,247,105,249,110,251,116,253,122,255,0
	defb 0	
SoundEffect1Data:
	defw 12,96,400,65526,2688
	defb 0

